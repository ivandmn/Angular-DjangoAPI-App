<div class="container rounded bg-white mt-5 mb-3 border border-dark rounded-4 border-opacity-50">
    <div class="row">
        <div class="col-md-4">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                <img title="usr_img" class="rounded-circle mt-3 mb-2" width="200px" height="200px" id='user-search-img' src="../../../../assets/images/user_icon.png">
                <span class="font-weight-bold">{{user.name}}</span>
                <span class="text-black-50">{{user.email}}</span>
            </div>
        </div>
        <div class="col-md border-right">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="text-right">Perfil</h4>
                    <button *ngIf="enableEditUserButton && current_user.rol == 'admin'" (click)="enableEditUser()">Editar usuario</button>
                    <button *ngIf="saveButtonUser && current_user.rol == 'admin'" (click)="saveUser()" [disabled]="userInfoForm.invalid">Guardar Cambios</button>
                </div>
                <form [formGroup]="userInfoForm">
                    <div class="row mt-2">
                        <div class="col-md-12"><label class="labels">Nombre de usuario</label><input type="text" class="form-control" formControlName="username"></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-12"><label class="labels">Nombre completo</label><input type="text" class="form-control" formControlName="full_name"></div>
                        <div class="col-md-12"><label class="labels">Email</label><input type="text" class="form-control" formControlName="email"></div>
                        <div class="col-md-12"><label class="labels">Rol</label>
                            <select class="form-select" formControlName="rol">
                                <option value="admin">Administrador</option>
                                <option value="user">Usuario</option>
                            </select>
                        </div>
                    </div>
                </form>
                <div class="col-md-12" *ngIf="this.current_user.rol == 'admin'">
                    <label class="labels">Permisos PowerBi</label>
                    <ng-multiselect-dropdown id='pwbipermissionsmultidropdown' [placeholder]="'Selecciona los permisos del PowerBi'" [settings]="pwbidropdownSettings" [data]="pwbidropdownList" [(ngModel)]="pwbiselectedItems"
                    (onSelect)="onPowerbiItemSelectChange()" (onDeSelect)="onPowerbiItemSelectChange()" [disabled]="current_user.rol != 'admin' || enableEditUserButton">
                    </ng-multiselect-dropdown>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container" *ngIf="this.current_user.rol == 'admin'"><button class="btn btn-secondary w-100 mb-2" (click)="getTicketsAsManager()">Ver tickets con este usuario como gestor</button></div>
<div class="container" *ngIf="this.user.rol == 'ADMINISTRADOR'"><button class="btn btn-secondary w-100 mb-2" (click)="getUserTicketsAsUser()">Ver tickets con este gestor como usuario</button></div>
